service:
  name: "chatbotgate e2e - password auth"
  description: "E2E verification environment for password authentication"

server:
  auth_path_prefix: "/_auth"
  base_url: "http://localhost:4180"
  development: true  # Enable development mode for E2E tests (relaxes CSP for inline scripts)

proxy:
  upstream:
    url: "http://target-app:3000/"

session:
  cookie:
    name: "mop-e2e-password"
    secret: "0123456789abcdef0123456789abcdef"
    expire: "24h"
    secure: false
    httponly: true
    samesite: "lax"

# Disable OAuth2 for password-only testing
oauth2:
  providers: []

# Disable email auth for password-only testing
email_auth:
  enabled: false

# Password authentication enabled
password_auth:
  enabled: true
  password: "P@ssW0rd"

# No authorization whitelist configured - all authenticated users are allowed
access_control:
  emails: []

logging:
  level: "debug"
  color: false

# KVS configuration (unified storage for sessions, tokens, and rate limiting)
kvs:
  default:
    type: "memory"
    memory:
      cleanup_interval: "5m"

  namespaces:
    session: "session"
    token: "token"
    email_quota: "email_quota"

# User information forwarding configuration
forwarding:
  # Encryption settings (for when encrypt filter is used)
  encryption:
    # E2E test encryption key (32+ characters)
    key: "e2e-test-encryption-key-32-chars-long-1234567890"
    algorithm: "aes-256-gcm"

  # Forward both username and email (plain text, header only)
  fields:
    - path: "username"
      header: "X-ChatbotGate-User"
    - path: "email"
      header: "X-ChatbotGate-Email"
