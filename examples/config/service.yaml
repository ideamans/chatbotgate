# Simple service configuration example
# Minimal configuration for quick start with email authentication only

service:
  name: "ChatbotGate"
  description: "Authentication gateway for your applications"

server:
  host: "0.0.0.0"
  port: 4180
  auth_path_prefix: "/_auth"

# Proxy configuration - replace with your upstream service
proxy:
  upstream:
    url: "http://localhost:8080/"

# Session configuration
session:
  cookie_name: "_chatbotgate_session"
  cookie_secret: "CHANGE-THIS-TO-RANDOM-32-CHARS-OR-MORE"
  cookie_expire: "168h"  # 7 days
  cookie_secure: true    # HTTPS required
  cookie_httponly: true
  cookie_samesite: "lax"

# OAuth2 disabled for simple setup
oauth2:
  providers: []

# Email authentication with sendmail
email_auth:
  enabled: true
  sender_type: "sendmail"

  sendmail:
    # Default path, automatically used if not specified
    path: "/usr/sbin/sendmail"
    from: "noreply@chatbotgate.com"
    from_name: "ChatbotGate"

  token:
    expire: "15m"

# No authorization whitelist - all authenticated users allowed
authorization:
  allowed: []

# Logging
logging:
  level: "info"
  color: true

# KVS configuration (using LevelDB for persistence)
kvs:
  default:
    type: "leveldb"
    leveldb:
      path: "/var/lib/chatbotgate/kvs"
      sync_writes: false  # Set to true for safer writes (slower)
      cleanup_interval: "5m"

  namespaces:
    session: "session"
    token: "token"
    ratelimit: "ratelimit"
